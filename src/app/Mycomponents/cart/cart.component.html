<div class ="cart-container">
    <h2>Your Bag Full Of Goodness üõçÔ∏è</h2>
    <div class ="checkout-container">
        <div class ="savings">
            <h3>Subtotal ({{ getCartCount() }} items) ${{  calculateTheSubtotal()| number:'1.2-2' }} </h3>
            <h4>Savings : ${{calculateTheSavings() | number:'1.2-2'}}</h4>
        </div>
        <!-- <button class="checkout-button">Checkout</button> -->
        <p-button (onClick)="showDialog()" label="Checkout" />
    </div>
    <div class ="heading">
        <p>Items </p>
        <p>Quantity</p>
        <p>Subtotal</p>
    </div>
    <div class ="cart-item-container">
        <div  *ngFor="let item of cartItems" class="cart-item">
            <div class="image-name-container">
                <img [src]="item.thumbnail"/>
                <div class ="name">
                    <h3>{{item.title}}</h3>
                    <div class ="price">
                        <h5>${{item.price | number:'1.2-2'}}</h5>
                        <h5>${{ item.price * (1 - item.discountPercentage / 100) | number:'1.2-2' }}</h5>
                    </div>
                </div>
            </div>
            <div class ="quantity-other">
                <div class="quantity-container">
                    <button (click)="decrementQuantity(item)" class="minus-button">-</button>
                    <p>{{item.quantity}}</p>
                    <button (click)="incrementQuantity(item)" class="plus-button">+</button>
                </div>
                <div class ="del-save">
                    <button (click)="deleteItem(item)">Delete</button><br/>
                    <button (click)="saveForLater(item)">Save for later</button>
                </div>
            </div>
            <div class ="total">
                <p>Total: ${{ item.price * item.quantity | number:'1.2-2'}}</p>
                <p>Saved: ${{ item.price * item.quantity * (item.discountPercentage / 100) | number:'1.2-2'}}</p>
            </div>
        </div>
    </div>
</div>

<p-dialog header="Checkout Summary" [modal]="true" [(visible)]="visible" [style]="{ width: '30rem' }">
    <span class="p-text-secondary block mb-5">Review your cart and proceed to checkout.</span>
    <div class="checkout-summary">
        <p>Total Items: {{ getCartCount() }}</p>
        <p>Subtotal: ${{ calculateTheSubtotal() | number:'1.2-2' }}</p>
        <p>Savings: ${{ calculateTheSavings() | number:'1.2-2' }}</p>
    </div>

    <!-- Address Section -->
    <div class="address-section mt-4">
        <h3>Enter Shipping Address</h3>
        <div class="p-field">
            <label for="address">Address</label>
            <input id="address" type="text" pInputText [(ngModel)]="address" placeholder="Enter your address">
        </div>
        <div class="p-field">
            <label for="city">City</label>
            <input id="city" type="text" pInputText [(ngModel)]="city" placeholder="Enter your city">
        </div>
        <div class="p-field">
            <label for="postalCode">Postal Code</label>
            <input id="postalCode" type="text" pInputText [(ngModel)]="postalCode" placeholder="Enter your postal code">
        </div>
        <div class="p-field">
            <label for="phoneNumber">Phone Number</label>
            <input id="phoneNumber" type="text" pInputText [(ngModel)]="phoneNumber" placeholder="Enter your phone number">
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-content-end gap-2">
        <p-button label="Cancel" severity="secondary" (onClick)="visible = false"></p-button>
        <p-button label="Done"></p-button>
    </div>
</p-dialog>
